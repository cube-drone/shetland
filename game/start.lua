--------------------------------------------------------------------------------
-- Hurray, it's a game!
--------------------------------------------------------------------------------

-- From tile sheet list
local tiles_1 = tiles.add(MOAITileDeck2D, "art/tiles_1.png", 5, 5)
local tiles_2 = tiles.add(MOAITileDeck2D, "art/tiles_2.png", 5, 5)

-- From layer list
local map_layer = layers:add()
map_layer:setViewport(config.viewport)
MOAIRenderMgr.pushRenderPass(map_layer)

render:init()

local map = MOAIGrid.new()
map:initRectGrid(10, 10, 128, 128)
map:setRow(10, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(09, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(08, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(07, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(05, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(04, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(03, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(02, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)
map:setRow(01, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06)

local map_prop = MOAIProp2D.new()
map_prop:setDeck(tiles_1)
map_prop:setGrid(map)
-- Binds to upper-left
map_prop:setPiv(config.viewport_width / 2, (config.viewport_height / 2) + (128 * 6.25))
map_layer:insertProp(map_prop)
